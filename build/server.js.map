{"version":3,"sources":["../develop/server.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;uBAIS,YAAY;;AAFlC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAI7C,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,GAAG,GAAG,OAAO,EAAE,CAAC;AACpB,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEvB,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;;AAGrC,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,UAAS,GAAG,EAAE,GAAG,EACvC;AACC,QAAO,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAC3B,KAAI,YAAY,GAAG,EAAE,CAAC;AACtB,IAAG,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAA,EAAE,EAAI;AACtC,cAAY,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAC,CAAC,CAAC;EAC5D,CAAC,CAAC;;;AAGH,IAAG,CAAC,SAAS,CAAC,GAAG,EAAE;AAClB,gBAAc,EAAE,iBAAiB;AACjC,uBAAqB,EAAE,iCAAiC;EACxD,CAAC,CAAC;;AAEH,KAAI,GAAG,GAAG,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;;;AAG9B,IAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAEd,uBAAQ,YAAY,EAAE,UAAC,QAAQ,EAAG;AACjC,UAAQ,CAAC,OAAO,CAAC,UAAA,IAAI,EAAI;AACxB,MAAG,CAAC,MAAM,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,OAAO,EAAC,CAAC,CAAC;GACxE,CAAC,CAAC;;AAEH,KAAG,CAAC,QAAQ,EAAE,CAAC;EACf,CAAC,CAAC;CACH,CAAC,CAAC","file":"server.js","sourcesContent":["'use strict';\n\nGLOBAL.config = require('../gspreadfile.js');\n\nimport {execute} from './src/main';\n\nlet express = require('express');\nlet app = express();\nlet Archiver = require('archiver');\nlet fs = require('fs');\n\napp.listen(process.env.PORT || 3412);\n\n\napp.get('/parse/:id', function(req, res)\n{\n\tconsole.log(req.params.id);\n\tlet spreadsheets = [];\n\treq.params.id.split(',').forEach(id => {\n\t\tspreadsheets.push({id: id, name: null, cleanSpaces: false});\n\t});\n\n\t// Tell the browser that this is a zip file.\n\tres.writeHead(200, {\n\t\t'Content-Type': 'application/zip',\n\t\t'Content-disposition': 'attachment; filename=myFile.zip'\n\t});\n\n\tvar zip = Archiver('zip', {});\n\n\t// Send the file to the page output.\n\tzip.pipe(res);\n\n\texecute(spreadsheets, (fileUrls)=>{\n\t\tfileUrls.forEach(file => {\n\t\t\tzip.append(fs.createReadStream(file.path), {name: file.name + '.json'});\n\t\t});\n\n\t\tzip.finalize();\n\t});\n});"]}